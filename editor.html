<script type="text/javascript">
tinymce.init({
    selector: "textarea",
    plugins: [
        // Core editing plugins
        "advlist", "autolink", "link", "lists", "charmap", 
        "searchreplace", "table", "code", "help",
        
        // Media and content
        "image", "media", "anchor", "insertdatetime",
        
        // UI and productivity  
        "preview", "fullscreen", "visualblocks", "quickbars",
        
        // Advanced features
        "codesample", "emoticons", "template", "wordcount",
        "autosave", "accordion",
        
        // All the suggested popular plugins
        "powerpaste", "checklist", "export", "footnotes", 
        "pageembed", "permanentpen", "advcode", "advtable", 
        "tableofcontents", "directionality", 
        "nonbreaking", "pagebreak", "save", "visualchars"
    ],
    
    // Comprehensive toolbar with all plugin features
    toolbar: [
        "undo redo | styles | bold italic underline strikethrough | forecolor backcolor | permanentpen",
        "alignleft aligncenter alignright alignjustify | bullist numlist checklist outdent indent | blockquote | ltr rtl",
        "link unlink image media table | codesample emoticons charmap | insertdatetime footnotes pageembed",
        "searchreplace visualblocks visualchars | tableofcontents export | code advcode preview fullscreen help"
    ],
    
    // Keep full menubar for complete access
    menubar: "file edit view insert format tools table help",
    
    // Quick toolbars with more options
    quickbars_selection_toolbar: "bold italic underline | quicklink h2 h3 blockquote | permanentpen footnotes",
    quickbars_insert_toolbar: "quickimage quicktable codesample pageembed checklist",
    
    // Enhanced context menu
    contextmenu: "link image table | permanentpen footnotes | export",
    
    // Content styling
    content_style: `
        body { 
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; 
            font-size: 14px; 
            line-height: 1.6; 
            max-width: 800px; 
            margin: 0 auto; 
        }
        blockquote { 
            border-left: 3px solid #0066cc; 
            margin-left: 0; 
            padding-left: 16px; 
            font-style: italic; 
            color: #555;
        }
    `,
    
    // Code sample languages (kept most common ones)
    codesample_languages: [
        {text: 'HTML/XML', value: 'markup'},
        {text: 'JavaScript', value: 'javascript'},
        {text: 'CSS', value: 'css'},
        {text: 'Python', value: 'python'},
        {text: 'Java', value: 'java'},
        {text: 'PHP', value: 'php'},
        {text: 'SQL', value: 'sql'}
    ],
    
    // Useful templates
    templates: [
        {
            title: 'Article Template',
            description: 'Basic article structure',
            content: '<h1>Article Title</h1><p><em>Brief introduction...</em></p><h2>Main Content</h2><p>Your content here...</p><h2>Conclusion</h2><p>Summary and final thoughts...</p>'
        },
        {
            title: 'Meeting Notes',
            description: 'Meeting notes template',
            content: '<h1>Meeting Notes</h1><p><strong>Date:</strong> </p><p><strong>Attendees:</strong> </p><h2>Agenda</h2><ul><li>Item 1</li><li>Item 2</li></ul><h2>Action Items</h2><ul><li>Task - Assigned to: </li></ul>'
        }
    ],
    
    // Auto-save (very useful)
    autosave_ask_before_unload: true,
    autosave_interval: "30s",
    autosave_retention: "2m",
    
    // Image handling
    images_upload_handler: function (blobInfo, success, failure) {
        // Placeholder - replace with your upload logic
        success('https://picsum.photos/800/400');
    },
    
    // Essential settings
    height: 500,
    resize: 'both',
    statusbar: true,
    browser_spellcheck: true,
    
    // Smart paste
    smart_paste: true,
    
    // Table settings
    table_use_colgroups: true,
    table_sizing_mode: 'responsive',
    
    // Ensure styles dropdown works properly
    style_formats_merge: false,
    style_formats: [
        {title: 'Headings', items: [
            {title: 'Heading 1', format: 'h1'},
            {title: 'Heading 2', format: 'h2'},
            {title: 'Heading 3', format: 'h3'},
            {title: 'Heading 4', format: 'h4'},
            {title: 'Heading 5', format: 'h5'},
            {title: 'Heading 6', format: 'h6'}
        ]},
        {title: 'Blocks', items: [
            {title: 'Paragraph', format: 'p'},
            {title: 'Blockquote', format: 'blockquote'},
            {title: 'Div', format: 'div'},
            {title: 'Pre', format: 'pre'}
        ]},
        {title: 'Inline', items: [
            {title: 'Bold', format: 'strong'},
            {title: 'Italic', format: 'em'},
            {title: 'Underline', format: 'u'},
            {title: 'Strikethrough', format: 'strikethrough'},
            {title: 'Code', format: 'code'}
        ]}
    ]
});
</script>
<form method="post" action="/dump">
    <textarea name="content"></textarea>
</form>