/* Moodle TinyMCE Auto-Resizer Styles */

/* Force maximum height on TinyMCE containers */
.tox.tox-tinymce {
    min-height: 80vh !important;
    height: 80vh !important;
}

/* Ensure the edit area is properly sized */
.tox-edit-area {
    min-height: 75vh !important;
    height: 75vh !important;
}

/* Size the iframe that contains the actual editor */
.tox-edit-area__iframe {
    min-height: 75vh !important;
    height: 75vh !important;
}

/* Adjust the sidebar wrap container */
.tox-sidebar-wrap {
    min-height: 75vh !important;
    height: 75vh !important;
}

/* Make sure the editor doesn't get cut off */
.tox-editor-container {
    min-height: 80vh !important;
    height: 80vh !important;
}

/* Optional: Make the resize handle more visible */
.tox-statusbar__resize-handle {
    background-color: #f0f0f0 !important;
    border: 1px solid #ccc !important;
    border-radius: 3px !important;
}

/* Hide Moodle sidebars when drawer hiding is enabled */
body.hide-drawer #block-region-side-pre,
body.hide-drawer #block-region-side-post,
body.hide-drawer .block-region,
body.hide-drawer [data-region="blocks-column"],
body.hide-drawer .blocks,
body.hide-drawer #page-sidebar,
body.hide-drawer .sidebar,
body.hide-drawer .drawer {
    display: none !important;
}

/* Expand main content area to use full width when drawer hiding is enabled */
body.hide-drawer #region-main,
body.hide-drawer .region-content,
body.hide-drawer #page-content,
body.hide-drawer .main-content,
body.hide-drawer [data-region="mainpage"],
body.hide-drawer .content-area {
    width: 100% !important;
    max-width: 100% !important;
    margin: 0 !important;
    float: none !important;
}

/* Make the page wrapper use full width when drawer hiding is enabled */
body.hide-drawer #page,
body.hide-drawer #page-wrapper,
body.hide-drawer .pagelayout,
body.hide-drawer #wrapper,
body.hide-drawer #topofscroll {
    max-width: 100% !important;
    width: 100% !important;
    min-width: 100% !important;
}

/* Force main content to ignore drawer space and use full width when drawer hiding is enabled */
body.hide-drawer .main-inner,
body.hide-drawer #page-content,
body.hide-drawer .content-container {
    margin-left: 0 !important;
    margin-right: 0 !important;
    padding-left: 15px !important;
    padding-right: 15px !important;
}

/* Make form element container use full width when drawer hiding is enabled */
body.hide-drawer .col-md-9.d-flex.flex-wrap.align-items-start.felement {
    min-width: 100% !important;
    flex: 1 1 100% !important;
}

/* Maximize editor height and width when enabled */
body.maximize-editor .tox.tox-tinymce {
    min-height: 80vh !important;
    height: 80vh !important;
    width: 100% !important;
    max-width: calc(100vw - 40px) !important;
}

body.maximize-editor .tox-edit-area {
    min-height: 75vh !important;
    height: 75vh !important;
}

body.maximize-editor .tox-edit-area__iframe {
    min-height: 75vh !important;
    height: 75vh !important;
}

body.maximize-editor .tox-sidebar-wrap {
    min-height: 75vh !important;
    height: 75vh !important;
}

body.maximize-editor .tox-editor-container {
    min-height: 80vh !important;
    height: 80vh !important;
}

/* Hide drawers when drawer hiding is enabled, but allow manual showing when .show class is present */
body.hide-drawer [data-region="drawer"]:not(.drawercontent):not(.drag-container):not(.show),
body.hide-drawer .drawer-left:not(.drawercontent):not(.drag-container):not(.show),
body.hide-drawer .drawer-right:not(.drawercontent):not(.drag-container):not(.show),
body.hide-drawer .drawer-primary:not(.drawercontent):not(.drag-container):not(.show) {
    display: none !important;
}

/* Hide specific right drawer with max-width approach only when not manually shown */
body.hide-drawer .drawer.drawer-right.no_toggle:not(.drawercontent):not(.drag-container) {
    max-width: 0 !important;
    overflow: hidden !important;
    width: 0 !important;
}

/* Allow manually shown drawers to appear with proper positioning when drawer hiding is enabled */
body.hide-drawer .drawer.show {
    display: block !important;
    position: fixed !important;
    z-index: 10000 !important;
}

/* Also hide any drawer container that might be wrapping it, but preserve drawercontent */
body.hide-drawer .drawer-container:not(.drawercontent):not(.drag-container),
body.hide-drawer [data-region="drawer-container"]:not(.drawercontent):not(.drag-container) {
    display: none !important;
}

/* Ensure important buttons remain visible even if inside hidden containers */
body.hide-drawer .btn.icon-no-margin {
    display: block !important;
    position: relative !important;
    z-index: 9999 !important;
}